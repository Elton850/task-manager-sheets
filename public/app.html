<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tasks • Task Manager</title>
  <link rel="stylesheet" href="/public/assets/css/app.css" />
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="brand">Task Manager</div>
      <div class="sub" id="meLine">Carregando...</div>

      <nav class="nav">
        <a class="active" href="/app">Tasks</a>
        <a id="adminLink" href="/admin" style="display:none;">Admin • Config</a>
        <a id="usersLink" href="/admin/users" style="display:none;">Admin • Usuários</a>
        <a href="#" id="btnLogout">Sair</a>
      </nav>
    </aside>

    <main class="main">
      <div class="topbar">
        <div>
          <div class="h1">Tasks</div>
          <div class="sub">Pendências e execução</div>
        </div>
        <div class="right">
          <button class="btn" id="btnNew">+ Nova</button>
          <button class="btn ghost" id="btnRefresh">⟳ Atualizar</button>
        </div>
      </div>

      <section class="card">
        <div class="grid">
          <div class="kpi"><div class="k">Total</div><div class="v" id="kTotal">0</div></div>
          <div class="kpi"><div class="k">Em Andamento</div><div class="v" id="kAnd">0</div></div>
          <div class="kpi"><div class="k">Concluído</div><div class="v" id="kDone">0</div></div>
          <div class="kpi"><div class="k">Em Atraso</div><div class="v" id="kLate">0</div></div>
          <div class="kpi"><div class="k">Concluídas em Atraso</div><div class="v" id="kDoneLate">0</div></div>
        </div>
      </section>

      <section class="card">
        <div class="grid" style="grid-template-columns: 220px 1fr 1fr 140px;">
          <div class="field">
            <label>Status</label>
            <select id="fStatus"></select>
          </div>
          <div class="field">
            <label>Responsável</label>
            <select id="fResp"></select>
          </div>
          <div class="field">
            <label>Atividade</label>
            <input id="fAtiv" type="text" placeholder="Filtrar por atividade..." />
          </div>
          <div class="field">
            <label>Prazo (de)</label>
            <input type="date" id="fFrom" />
          </div>
          <div class="field">
            <label>Prazo (até)</label>
            <input type="date" id="fTo" />
          </div>
          <div class="field">
            <label>&nbsp;</label>
            <button class="btn" id="btnFilter">Filtrar</button>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="tableWrap">
          <table>
            <thead>
              <tr>
                <th>Competência</th>
                <th>Recorrência</th>
                <th>Tipo</th>
                <th>Atividade</th>
                <th>Responsável</th>
                <th>Prazo</th>
                <th>Realizado</th>
                <th>Status</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="tb"></tbody>
          </table>
        </div>

        <div class="hint" id="hint"></div>
      </section>
    </main>
  </div>

  <!-- Modal Task -->
  <div class="modal" id="modal">
    <div class="box">
      <div class="mhead">
        <div class="mtitle" id="mTitle">Nova task</div>
        <button class="btn ghost" id="mClose">Fechar</button>
      </div>

      <div class="mbody">
        <div class="field">
          <label>Competência (Mês)</label>
          <select id="mCompMes"></select>
        </div>

        <div class="field">
          <label>Competência (Ano)</label>
          <select id="mCompAno"></select>
        </div>

        <div class="field">
          <label>Recorrência</label>
          <select id="mRecorrencia"></select>
        </div>

        <div class="field">
          <label>Tipo</label>
          <select id="mTipo"></select>
        </div>

        <div class="field span2">
          <label>Atividade</label>
          <input id="mAtividade" maxlength="200" />
        </div>

        <div class="field">
          <label>Status</label>
          <select id="mStatus"></select>
        </div>

        <div class="field">
          <label>Responsável</label>
          <select id="mResp"></select>
        </div>

        <div class="field">
          <label>Prazo</label>
          <input type="date" id="mPrazo" />
        </div>

        <div class="field">
          <label>Realizado</label>
          <input type="datetime-local" id="mRealizado" />
        </div>

        <div class="field span3">
          <label>Observações</label>
          <textarea id="mObs" rows="3" maxlength="1000"></textarea>
        </div>
      </div>

      <div class="mfoot">
        <div>
          <button class="btn ghost" id="mClearReal">Limpar Realizado</button>
        </div>
        <div style="display:flex;gap:10px;">
          <button class="btn ghost" id="mCancel">Cancelar</button>
          <button class="btn" id="mSave">Salvar</button>
        </div>
      </div>

      <div class="hint" id="mHint" style="padding:0 14px 14px"></div>
    </div>
  </div>

  <script src="/public/assets/js/shared.js"></script>
  <script src="/public/assets/js/app-page.js"></script>
</body>
</html>